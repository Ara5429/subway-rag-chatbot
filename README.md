ğŸš‡ subway-rag-chatbot

ì§€í•˜ì²  ì—­ ë‚´ë¶€ ì •ë³´ëŠ” RAGë¡œ, ì—­ ì£¼ë³€ ìµœì‹  ì •ë³´ëŠ” ë„¤ì´ë²„ ê³µì‹ APIë¡œ â€” ë‘˜ì„ í•©ì³ í•œ ë²ˆì— ë‹µí•´ì£¼ëŠ” Streamlit ì±—ë´‡










í™”ì¥ì‹¤/ì—˜ë¦¬ë² ì´í„°/í¸ì˜ì‹œì„¤ ê°™ì€ ì •ì  ì •ë³´ëŠ” PDF ê¸°ë°˜ RAG,
ë§›ì§‘/ê°€ê²Œ ê°™ì€ ë™ì  ì •ë³´ëŠ” ë„¤ì´ë²„(ë¡œì»¬Â·ë¸”ë¡œê·¸) ê³µì‹ APIë¡œ ë³´ê°•í•©ë‹ˆë‹¤.

âœ¨ í•µì‹¬ ê¸°ëŠ¥
ë²”ì£¼	ì—­í• 	ì£¼ìš” í¬ì¸íŠ¸
RAG	ì—­ ë‚´ë¶€ ê³ ì • ì •ë³´	Chroma + text-embedding-3-large
ë„¤ì´ë²„ ë¡œì»¬	ì¸ê·¼ ìƒí˜¸/ì£¼ì†Œ/ë§í¬	ë¦¬ë·° ë§ì€ ìˆœ, ì—­Â·ì¶œêµ¬ í‚¤ì›Œë“œ ë°˜ì˜
ë„¤ì´ë²„ ë¸”ë¡œê·¸	ìµœê·¼ Nì¼ í›„ê¸° ìš”ì•½	ì—­ëª… í•„í„°ë§ ì§€ì›(ë‹¤ë¥¸ ì—­ ë…¸ì´ì¦ˆ ì œê±°)
ì§ˆì˜ ì¦ê°•	aug_q ìƒì„±	ëŒ€í™” ë§¥ë½ ë°˜ì˜, ì—­/ì¶œêµ¬ ë¶ˆë³€ ì›ì¹™
ì‘ë‹µ	ìŠ¤íŠ¸ë¦¬ë°	ë¬¸ì„œ+ì›¹ ì»¨í…ìŠ¤íŠ¸ í•©ì„±, ìƒí˜¸ëª…+ë§í¬ ìš°ì„ 
ğŸ§­ ë™ì‘ íë¦„
flowchart LR
    U[User ì…ë ¥] --> A[ì§ˆì˜ ì¦ê°• aug_q<br/> (ì—­/ì¶œêµ¬ ìœ ì§€)]
    A --> R[RAG ê²€ìƒ‰ (Chroma)]
    A --> N1[ë„¤ì´ë²„ ë¡œì»¬\n(ì¥ì†Œ í›„ë³´)]
    A --> N2[ë„¤ì´ë²„ ë¸”ë¡œê·¸\n(ìµœê·¼ Nì¼ í›„ê¸°)]
    N1 --> C[ì»¨í…ìŠ¤íŠ¸ ë³‘í•© (ì›¹ ì•ìª½)]
    N2 --> C
    R --> C
    C --> L[LLM ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°]

ğŸ—‚ï¸ í´ë” êµ¬ì¡°
<details> <summary><b>ì—´ê¸°/ë‹«ê¸°</b></summary>
subway-rag-chatbot/
â”œâ”€ src/
â”‚  â”œâ”€ rag.py               # Streamlit ì•± (UI/ëŒ€í™”/ìŠ¤íŠ¸ë¦¬ë°)
â”‚  â”œâ”€ retriever.py         # ë²¡í„°ìŠ¤í† ì–´/ì²´ì¸/ì§ˆì˜ ì¦ê°•
â”‚  â””â”€ naver_search.py      # ë„¤ì´ë²„ ë¡œì»¬/ë¸”ë¡œê·¸, ì—­Â·ì¶œêµ¬ íŒŒì„œ
â”œâ”€ data/
â”‚  â””â”€ subway_station_docs.pdf  # ë‚´ë¶€ RAG ë¬¸ì„œ (ì˜ˆì‹œ)
â”œâ”€ chroma_store/           # Chroma persist ë””ë ‰í„°ë¦¬ (ë¯¸ë¦¬ ìƒì„±/ì¸ë±ì‹± í•„ìš”)
â”œâ”€ .env                    # API í‚¤ (ì•„ë˜ ì˜ˆì‹œ)
â””â”€ README.md

</details>
âš™ï¸ ì„¤ì¹˜ & ì‹¤í–‰
# 1) ì˜ì¡´ì„±
pip install -U streamlit langchain langchain-openai langchain-core langchain-chroma python-dotenv requests

# 2) .env ì‘ì„± (ë ˆí¬ ë£¨íŠ¸)
#   OPENAI_API_KEY, NAVER_CLIENT_ID, NAVER_CLIENT_SECRET
#   ì˜ˆì‹œëŠ” ì•„ë˜ ì°¸ê³ 

# 3) (ì²˜ìŒ 1íšŒ) PDF ì„ë² ë”© â†’ Chroma ì €ì¥ (ì¸ë±ì‹± ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆë‹¤ë©´ ì‹¤í–‰)
#   ì´ë¯¸ chroma_storeê°€ ìˆë‹¤ë©´ ìƒëµ ê°€ëŠ¥

# 4) ì‹¤í–‰
streamlit run src/rag.py


.env ì˜ˆì‹œ

OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

ğŸ§© êµ¬í˜„ ë©”ëª¨ (ì¤‘ìš” í¬ì¸íŠ¸ë§Œ)

ì¦ê°• ì§ˆì˜ aug_q:
query_augmentation_chainìœ¼ë¡œ ë§Œë“  ê²€ìƒ‰ìš© ë¬¸ì¥.
í”„ë¡¬í”„íŠ¸ì— â€œì›ë¬¸ì— ë‚˜ì˜¨ ì§€ëª…/ì—­ëª…/ì¶œêµ¬ ë²ˆí˜¸ëŠ” ì ˆëŒ€ ìƒëµÂ·ë³€ê²½ ê¸ˆì§€â€ ê·œì¹™ì„ ë„£ìŒ.

ë„¤ì´ë²„ ê²€ìƒ‰ì€ ë°˜ë“œì‹œ aug_që¡œ:
parse_station_exit(aug_q) â†’ (station, exit_no) ì¶”ì¶œ â†’
build_naver_places_context(station, exit_no, keyword) / build_naver_blog_context(aug_q, station=...).

ì»¨í…ìŠ¤íŠ¸ ìˆœì„œ:
docs = [ë„¤ì´ë²„_ë¡œì»¬, ë„¤ì´ë²„_ë¸”ë¡œê·¸] + RAGë¬¸ì„œë“¤ (ì›¹ì„ ì•ìª½ì— í”„ë¦¬íœë“œ)

ì‘ë‹µ ê·œì¹™(í”„ë¡¬í”„íŠ¸):
ê³ ì •ì •ë³´ëŠ” PDF ìš°ì„ , ë§›ì§‘ì€ ë„¤ì´ë²„ ìš°ì„ , ìƒí˜¸ëª…+ë§í¬ ìƒìœ„ 3ê°œ í•„ìˆ˜.
